extends ../layout.jade

block content
  div(ng-controller='TemplateNewCtrl')
    .text-center
      h2 New Template
    div.animate-show(ng-show='state.reset')
      .page-header.text-center
        small() Step 1: choose an action
      .row
        .col-md-4.col-md-offset-4
          .form-group
              button.btn.btn-lg.btn-block.btn-primary(
                ng-click='setState("new")') New
          .form-group
            button.btn.btn-lg.btn-block.btn-primary(
              ng-click='setState("clone")') Clone
    div.animate-show(ng-show='state.new')
      .page-header.text-center
        small() Step 2: add test tasks

    div.animate-show(ng-show='state.clone')
      .page-header.text-center
        small() Step 2: Filter existing templates
      form(name='filter')
        .row.text-center
          h4 Project: {{projectModel}}
          .btn-group()
              button.btn.btn-lg.btn-danger(
                ng-repeat='project in projects'
                type='button'
                ng-model='projectModel.id'
                btn-radio='project.id'
                name='project.name') {{project.name}}
        .row.text-center(ng-show='{{filter.dirty}}')
          h4 Platform (optional):
          .btn-group()
            button.btn.btn-lg.btn-warning(
              ng-repeat='platform in filteredProject.platforms')

        // After selection, redirect to :id/template-edit
append scripts
  script(src='/js/modules/template-new.js')